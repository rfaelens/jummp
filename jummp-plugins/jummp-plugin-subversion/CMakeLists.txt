set(JUMMP_SUBVERSION_PLUGIN_VERSION "0.1")
set(JUMMP_SUBVERSION_PLUGIN_NAME "grails-jummp-plugin-subversion-${JUMMP_SUBVERSION_PLUGIN_VERSION}.zip")
add_custom_command(OUTPUT ${CMAKE_CURRENT_SOURCE_DIR}/${JUMMP_SUBVERSION_PLUGIN_NAME}
COMMAND CLASSPATH=${JUMMP_PLUGIN_LIB_BUILD_DIR}:$ENV{CLASSPATH} grails package-plugin
DEPENDS jummp-plugin-lib
WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
)
add_custom_command(OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/${JUMMP_SUBVERSION_PLUGIN_NAME}
COMMAND mv ${JUMMP_SUBVERSION_PLUGIN_NAME} ${CMAKE_CURRENT_BINARY_DIR}/${JUMMP_SUBVERSION_PLUGIN_NAME}
DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/${JUMMP_SUBVERSION_PLUGIN_NAME}
WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
)
SET_SOURCE_FILES_PROPERTIES(${JUMMP_SUBVERSION_PLUGIN_NAME} PROPERTIES GENERATED 1)
add_custom_target(
jummp-subversion-plugin
ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/${JUMMP_SUBVERSION_PLUGIN_NAME})
set_property(GLOBAL PROPERTY JUMMP_SUBVERSION_PLUGIN ${CMAKE_CURRENT_BINARY_DIR}/${JUMMP_SUBVERSION_PLUGIN_NAME})
